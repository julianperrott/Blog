{
"date": "2014-10-20",
"title": "Ingress Intel Total Conversion - JavaScript Plugin",
"description": "I wrote a Javascript plugin for the Ingress Intel Total Conversion browser add-on to show fields which only needed one link to complete them.",
"slug": "Ingress-Intel-Total-Conversion-JavaScript-Plugin",
"draft": true,

"background": "bg_ingress"
}

<p>
    <a href="https://www.ingress.com/">Ingress</a>
    is a game where real world locations are defined as portals. These portals can be linked to other portals. When 3 portals are linked in a triangle a "field" is created. These fields score "points" for your team.
</p> <p>
    <a href="http://iitc.jonatkins.com/">Ingress Intel Total Conversion</a> is a browser add-on that modifies the standard ingress Intel map, offering more features. One feature it allows is new functionality in the form of JavaScript plug-ins.
    <br>
</p>
<h2>The Objective</h2> <p>
    I thought it might be useful to see on the map, fields which have already 2 of their sides completed, and to indicate the link which would complete them.
</p> <p>
    For example: in the image below we can see existing fields, we can also see that linking portal 1 to 3 would create a field. Sometimes these fields links are less obvious.
</p> <p>
    One of the rules of linking portals is that a new link may not cross an existing link. So portal 4 could not be linked to 3 because it would cross the 1 to 2 link.
</p> <p>
    <a href="/post/img/Test1.png" target="_blank">
        <img title="Test1" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="Test1" src="/post/img/Test1.png" width="869" height="425">
    </a>
</p>
<h2>The Algorithm</h2> <p>To determine these "field finishing" links:</p>
<ul>
    <li>Make a list of all existing links between portals.
    <li>For each portal owned by your team move across all of its existing links(if it has any) to the next portal (e.g. 1 to 2), repeat from that portal to the next (e.g. 2 to 3)
    <li>
        For all of the paths found check if the link back to the first portal (e.g. 3 to 1) can be made without crossing any link in the list of portal links made earlier.
    </li>
</ul> <p>
    The complicated bit is determining if two line segments cross, thankfully Martin Thoma has a great site with some JavaScript code which I have included in the algorithm.
</p> <p>
    <a title="http://martin-thoma.com/how-to-check-if-two-line-segments-intersect/" href="http://martin-thoma.com/how-to-check-if-two-line-segments-intersect/">
        http://martin-thoma.com/how-to-check-if-two-line-segments-intersect/
    </a>
</p>
<h2>The Plug-in</h2> <p>
    Once the required links have been determined they need to be represented on the map. This done by drawing on a new map layer called 'Field Finisher', the links are indicated using red dotted lines.
</p> <p>
    <a href="/post/img/Plugin.png" target="_blank">
        <img title="Plugin" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="Plugin" src="/post/img/Plugin.png" width="887" height="430">
    </a>
</p> <p> <p>
    The algorithm has been unit tested using <a href="http://jasmine.github.io/">Jasmine</a>
</p> <p>
    The plug-in code can be download here
    <a href="/post/content/ingress/field-finisher.user.js">
        field-finisher.user.js
    </a>
</p>
