<!DOCTYPE html>




<html class="no-js">
 
<head>
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Pulse</title>
    <meta name="description" content="...">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">

    
    <script src="/js/modernizr-2.6.2.min.js"></script>
    
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:200,300,400,600,700,900' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900' rel='stylesheet' type='text/css'>
    <script>
		var mainColor = 'blue';
    </script>
</head>

<body>
    
    <div id="wrapper">
        <section id="blog" class="subpage detail">

            
            <header class="font-white striped-image" style="background-image: url(/img/bg_blog-detail.jpg);">
                <div class="container">
    <div class="row">
        <a href="#contact" class="logo wow bounceInDown" data-wow-duration="1s" data-wow-delay=".5s">
            <div class="wrap" style="border: 0;padding-bottom:0;margin-bottom:0">
                <img src="/img/logo.png" width="100" />
            </div>
        </a>
        <div class="col-sm-8 col-sm-offset-2 wow fadeInDown">
            <h1>codesin.net</h1>
            <div class="dotted-break"></div>
            <h2>A blog about coding - by Julian Perrott</h2>

            <blockquote>
                <p title="We have to experience something ourselves in order to really understand it. If we are hearing something it might be interesting. If we are seeing something it might be beautiful. But only if we have it happening to ourselves - actively doing it - we can really know how it is."
                   data-toggle="tooltip" data-placement="top">
                    "I hear and I forget. I see and I remember. I do and I understand." - Confucius
                </p>
            </blockquote>
        </div>
    </div>
</div>
            </header>

            <div class="container">
                
                <div class="row articles">

                    
                    <article class="col-xs-12 article">
                        <div class="row">
                            <div class="col-lg-2 visible-lg asideArticleInfo">
                                <div class="date">
                                    <div class="day">8</div>
                                    <div class="month">Jul 2014</div>
                                </div>
                                <div class="comments">
                                    <i class="fa fa-comments"></i> 25
                                </div>
                            </div>
                            <div class="col-lg-10">
                                <h2 class="title">Chaining promises with AngularJs and JQuery</h2>
                                    <div class="articleInfo clearfix">
                                        <div class="i hidden-lg">Post date: <strong>Tue, Jul 8, 2014</strong></div>
                                        <div class="i">Categories: <a href="blog-listing.html"><strong>country</strong></a>, <a href="blog-listing.html"><strong>heaven</strong></a></div>
                                    </div>
                                    <p>Promises allow for consistent handling of the results of a task (Usually asynchronous). A promise is returned from a function call with a deferred result. <br>The promise result is either success (promise.resolve) or failure (promise.reject).</p> <p>The basic usage pattern looks like this: </p> <p><!-- HTML generated using hilite.me --></p> <div style="overflow: auto; border-top: gray 0.1em solid; border-right: gray 0.1em solid; width: auto; background: #ffffff; border-bottom: gray 0.1em solid; padding-bottom: 0.2em; padding-top: 0.2em; padding-left: 0.6em; border-left: gray 0.8em solid; padding-right: 0.6em">
    <table>
        <tbody>
            <tr>
                <td>
                    <pre style="margin: 0px; line-height: 125%">1
2</pre>
                </td>
                <td>
                    <pre style="margin: 0px; line-height: 125%">doStuff() <span style="color: #008000">// returns a promise</span>
   .then(<span style="color: #0000ff">function</span>(data) { <span style="color: #008000">/* handle success */</span>  }, <span style="color: #0000ff">function</span>(data) { <span style="color: #008000">/* handle rejection */</span> }); 
</pre>
                </td>
            </tr>
        </tbody>
    </table>
</div><br>
If you must have more than one step then promises can be chained. Each step in the chain should return another promise. If any of the steps get rejected then the next steps are skipped and the next rejection handler is called.
<br>&nbsp;<br>
<!-- HTML generated using hilite.me -->
<div style="overflow: auto; border-top: gray 0.1em solid; border-right: gray 0.1em solid; width: auto; background: #ffffff; border-bottom: gray 0.1em solid; padding-bottom: 0.2em; padding-top: 0.2em; padding-left: 0.6em; border-left: gray 0.8em solid; padding-right: 0.6em">
    <table>
        <tbody>
            <tr>
                <td>
                    <pre style="margin: 0px; line-height: 125%">1
2
3
4</pre>
                </td>
                <td>
                    <pre style="margin: 0px; line-height: 125%">doStuff1() <span style="color: #008000">// should return a promise</span>
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #0000ff">return</span> doStuff2(); <span style="color: #008000">/* should return a promise */</span> })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #0000ff">return</span> doStuff3(); <span style="color: #008000">/* should return a promise */</span> })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #008000">/* all were resolved */</span> }, <span style="color: #0000ff">function</span> (data) { <span style="color: #008000">/* handle rejection from any of the above*/</span> }); 
</pre>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p><strong><font size="4"></font></strong>&nbsp;</p>
<p><strong><font size="4">AngularJs</font></strong><br>&nbsp;&nbsp;&nbsp; <br>Use 'catch' to make it more obvious when the failure handling is.<br>'finally' indicates a step which always runs.<br>&nbsp;&nbsp;&nbsp; <br></p><!-- HTML generated using hilite.me -->
<div style="overflow: auto; border-top: gray 0.1em solid; border-right: gray 0.1em solid; width: auto; background: #ffffff; border-bottom: gray 0.1em solid; padding-bottom: 0.2em; padding-top: 0.2em; padding-left: 0.6em; border-left: gray 0.8em solid; padding-right: 0.6em">
    <table>
        <tbody>
            <tr>
                <td>
                    <pre style="margin: 0px; line-height: 125%">1
2
3
4
5
6</pre>
                </td>
                <td>
                    <pre style="margin: 0px; line-height: 125%">doStuff1() <span style="color: #008000">// must return a promise</span>
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #0000ff">return</span> doStuff2(); })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #0000ff">return</span> doStuff3(); })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #008000">/* all steps were resolved */</span> });
    .<span style="color: #0000ff">catch</span>(<span style="color: #0000ff">function</span> () { <span style="color: #008000">/* at least one step was rejected */</span> })
    .<span style="color: #0000ff">finally</span>(<span style="color: #0000ff">function</span> () { <span style="color: #008000">/* I always run */</span> })
</pre>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p><br><strong><font size="4">JQuery</font></strong></p>
<p>Use 'done' to execute code when no rejections occur.<br>Use 'fail' to make it obvious when the failure handling is.<br>'always' indicates a step which always runs.</p>
<p><!-- HTML generated using hilite.me --></p>
<div style="overflow: auto; border-top: gray 0.1em solid; border-right: gray 0.1em solid; width: auto; background: #ffffff; border-bottom: gray 0.1em solid; padding-bottom: 0.2em; padding-top: 0.2em; padding-left: 0.6em; border-left: gray 0.8em solid; padding-right: 0.6em">
    <table>
        <tbody>
            <tr>
                <td>
                    <pre style="margin: 0px; line-height: 125%">1
2
3
4
5
6</pre>
                </td>
                <td>
                    <pre style="margin: 0px; line-height: 125%">doStuff1()
    .then(<span style="color: #0000ff">function</span> () { <span style="color: #0000ff">return</span> doStuff2(); })
    .then(<span style="color: #0000ff">function</span> () { <span style="color: #0000ff">return</span> doStuff3(); })
    .done(<span style="color: #0000ff">function</span> () { alert(<span style="color: #a31515">'all worked'</span>); })
    .fail(<span style="color: #0000ff">function</span> () { alert(<span style="color: #a31515">'at least one failed'</span>); })
    .always(<span style="color: #0000ff">function</span> () { alert(<span style="color: #a31515">'I always run'</span>); });
</pre>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p><br>&nbsp;&nbsp;&nbsp; <br><strong><font size="4">Avoiding easy mistakes:</font></strong>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; <br><strong>1. Forgetting to include the return keyword.</strong> <!-- HTML generated using hilite.me --></p>
<div style="overflow: auto; border-top: gray 0.1em solid; border-right: gray 0.1em solid; width: auto; background: #ffffff; border-bottom: gray 0.1em solid; padding-bottom: 0.2em; padding-top: 0.2em; padding-left: 0.6em; border-left: gray 0.8em solid; padding-right: 0.6em">
    <table>
        <tbody>
            <tr>
                <td>
                    <pre style="margin: 0px; line-height: 125%">1
2
3
4</pre>
                </td>
                <td>
                    <pre style="margin: 0px; line-height: 125%">doStuff1() <span style="color: #008000">// must return a promise</span>
    .then(<span style="color: #0000ff">function</span> (data) { doStuff2(); <span style="color: #008000">/* must return a promise */</span> })
    .then(<span style="color: #0000ff">function</span> (data) { doStuff3(); <span style="color: #008000">/* must return a promise */</span> })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #008000">/* all were resolved */</span> }, <span style="color: #0000ff">function</span> (data) { <span style="color: #008000">/* handle rejection from any of the above*/</span> });
</pre>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>In this case when doStuff1() is resolved doStuff2() will be called. <br>Because it does not return a promise then doStuff3() will be called irrespective to the result of doStuff2() <br>unless it throws an exception.</p>
<p>i.e. A step must return a promise or throw an exception otherwise the next 'resolved' step will be called.</p>
<p>&nbsp;</p>
<p><strong>2. In AngularJs handling failure on every chained step rather than once at the end.</strong></p>

<p><!-- HTML generated using hilite.me --></p>
<div style="overflow: auto; border-top: gray 0.1em solid; border-right: gray 0.1em solid; width: auto; background: #ffffff; border-bottom: gray 0.1em solid; padding-bottom: 0.2em; padding-top: 0.2em; padding-left: 0.6em; border-left: gray 0.8em solid; padding-right: 0.6em">
    <table>
        <tbody>
            <tr>
                <td>
                    <pre style="margin: 0px; line-height: 125%">1
2
3
4</pre>
                </td>
                <td>
                    <pre style="margin: 0px; line-height: 125%">doStuff1() <span style="color: #008000">// must return a promise</span>
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #0000ff">return</span> doStuff2(); }, <span style="color: #0000ff">function</span>(data) { alert(<span style="color: #a31515">'step 1 was rejected'</span>); })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #0000ff">return</span> doStuff3(); }, <span style="color: #0000ff">function</span> (data) { alert(<span style="color: #a31515">'step 2 was rejected'</span>); })
    .then(<span style="color: #0000ff">function</span> (data) { <span style="color: #008000">/* handle resolved from dostuff3 */</span> }, <span style="color: #0000ff">function</span> (data) { alert(<span style="color: #a31515">'step 3 was rejected'</span>); });
</pre>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p><br>&nbsp;&nbsp;&nbsp; <br>If a step should only execute if the previous step was resolved then rejection should be handled after the last step.
<br>The problem with handling it in each 'then' is that if the rejection function does not either return a promise which is rejected or throw an exception then the next chained resolved step will be executed. </p>
<p>e.g. if doStuff1() is rejected then 'alert('step 1 was rejected');' will be executed. Because this does not return a promise the next 'then' statement resolved step will run and 'doStuff3()' will be called.
<br>&nbsp;<br>Note: this is different to the way JQuery works. It will pass the rejected promise to the next '.then' causing each rejection handler to be called.</p>
<p>JQuery Chained Promise Example: <a title="http://jsfiddle.net/2DQwx/" href="http://jsfiddle.net/2DQwx/">http://jsfiddle.net/2DQwx/</a>
</p>

                            </div>
                        </div>
                    </article>

                    
                    <div class="col-xs-12 articleComments">
                        <div class="row">

                        </div>
                    </div>

                    

                </div>
            </div>
        </section>


        
<section id="contact">
    <div class="container">
        
        <header class="font-white">
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2 wow fadeInDown">
                    <h1>Contact me</h1>
                    <div class="dotted-break"></div>
                    <h2>Say Hello !</h2>
                </div>
            </div>
        </header>
        
        <div class="row">
            <div class="col-xs-12 info" style="font-size: 20px;">
                <span class="wow fadeInRight" data-wow-delay="0.2s"><i class="fa fa-location-arrow icon"></i> I Live in Milton Keynes, United Kingdom</span>
                <span class="wow fadeInRight" data-wow-delay="0.4s"><i class="fa fa-envelope-o icon"></i>
               <a href="mailto:julian.perrott@gmail.com?Subject=Hello, Julian">julian.perrott@gmail.com</a></span>
            </div>
        </div>

        <div id="contactfooter">

            
            <div class="social">
                <a href="http://uk.linkedin.com/in/julianperrott1" data-toggle="tooltip" data-placement="bottom" title="linked In" class="icon"><i class="fa fa-3x fa-linkedin"></i></a>
                <a href="https://github.com/julianperrott" data-toggle="tooltip" data-placement="bottom" title="GitHub" class="icon"><i class="fa fa-3x fa-github"></i></a>
                <a href="https://www.facebook.com/julianperrott" data-toggle="tooltip" data-placement="bottom" title="Facebook" class="icon"><i class="fa fa-3x fa-facebook"></i></a>
            </div>
        </div>
    </div>
</section>
        
<div class="googleMapWrap">
    <div id="googleMap" class="wow flipInX" data-lat="52.040622" data-lng="-0.759417"></div>
</div>


        <footer id="footer">
            <div>Bootstrap Theme Designed by: <a href="http://jurajmolnar.com" title="#" target="_blank">Juraj Molnár</a></div>
            <div><a href="http://gohugo.io/" target="_blank">Hugo</a> theme created by: Julian Perrott</div>
        </footer>

    </div>
    
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/jquery.easing.1.3.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/parsley.min.js"></script>
<script src="/js/jquery.shuffle.min.js"></script>
<script src="/js/wow.min.js"></script>
<script src="/js/jquery.easypiechart.min.js"></script>
<script src="/js/jquery.countTo.js"></script>
<script src="/js/waypoints.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false"></script>


<script src="/js/portfolio.js"></script>
<script src="/js/script.js"></script>


    <link rel="stylesheet" href="/css/options.css">

    <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-59171735-1', 'auto');
          ga('send', 'pageview');
</script>

    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>

<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>