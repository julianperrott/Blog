<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="A developer blog by Julian Perrott">
<meta name="author" content="Codes in .NET">
<meta name="generator" content="Hugo 0.16" />
<title>Blog</title>
<!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
<link href="/css/bootstrap.min.css" rel="stylesheet">
<!-- Custom CSS -->
<link href="/css/freelancer.css" rel="stylesheet">
<link href="/css/animate.css" rel="stylesheet">
<link href="/css/animatedtitles.css" rel="stylesheet">

<!-- Custom Fonts -->
<link href="/css/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">


<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    </head>
	<body id="page-top">
		
		<div id="wrapper" class="animated fadeIn">
			<section id="blog" class="subpage detail">
			
			 <!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.codesin.net">Codes In .Net</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="hidden">
                    <a href="#page-top"></a>
                </li>
                <li class="page-scroll">
                    <a href="/#portfolio">My Blog</a>
                </li>
                <li class="page-scroll">
                    <a href="#about">About Me</a>
                </li>
				

            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>


				

				<div>
				<img  src="/img/bg_ionic_1920x500.jpg" style="max-width: 100%;height: auto;display: block;margin-left: auto;margin-right: auto;"/> 
				</div>

				<div class="container">
					
					<div class="row articles">

						
						<article class="col-xs-12 article" style="margin-top:10px">
							<div class="row">
								<div class="col-lg-2 visible-lg asideArticleInfo" style="margin-top:10px">
									<div class="date">
										<div class="badge">16 Dec 2018</div>
									</div>
									<div class="comments">
										<i class="fa fa-comments"></i> <span class="disqus-comment-count" data-disqus-identifier="Ionic"></span>
									</div>
								</div>
								<div class="col-lg-10">
									<h2 class="title">A Cross Platform App &#39;Web Word Cloud&#39; </h2> 
									<div class="articleInfo clearfix">
										<div class="i hidden-lg">Post date: <strong>Sun, Dec 16, 2018</strong></div>
										
										<br />
										
										

									</div>
									

<p>Previously I&rsquo;ve worked with AngularJs as the front end JS framework for single page applications. The world has moved on and React and Angular are popular now, so both are worth learning to understand what each offers. But for this application I focused on Angular. Ionic is a technology built on top of Angular which allows cross platform apps to be created which will run on Android or iOS, so I decided to learn it and how Angular works within it.</p>

<h3 id="the-application">The Application</h3>

<p>The application I wrote to learn Ionic is called WebWordCloud. It uses SVG to render word clouds like the example below and can be played with at: <a href="www.webwordcloud.com">www.webwordcloud.com</a>. The souce code is here: <a href="https://github.com/julianperrott/Ionic-WordCloud">Ionic-WordCloud</a></p>

<p><img src="/post/img/WebWordCloud1.jpg" alt="" /></p>

<p>The words shown in the word cloud can be taken from any web page on the internet. Hence the name of the app &lsquo;Web Word Cloud&rsquo;.</p>

<p>For example this page from BBC news &ldquo;Katowice: COP24 Climate change deal to bring pact to life&rdquo; <a href="https://www.bbc.co.uk/news/science-environment-46582025">www.bbc.co.uk/news</a> has been used to create the following image:
<img src="/post/img/WebWordCloud2.jpg" alt="" /></p>

<p><br/></p>

<p>Many options are included in the application for choosing the font, shape and style of the text to be rendered:</p>

<p><img src="/post/img/WebWordCloud_options.png" alt="" /></p>

<h3 id="writing-the-application">Writing the application</h3>

<p>There is always an element of learning that is required when doing pretty much any coding and when doing something new then this is especially so. Learning the basics from tutorials is a good way to get the ball rolling e.g. <a href="https://ionicframework.com/docs/intro/tutorial/">ionicframework.com/docs/intro/tutorial/</a></p>

<p>Next, some examples more specific to what you want to do are helpful. Creating a word cloud and using SVG in Ionic was what I needed and these two sites helped me form the basis of the application:</p>

<blockquote>
<p><a href="https://github.com/proustibat/d3js-ionic">github.com/proustibat/d3js-ionic</a>. A tutorial app built with <a href="https://ionicframework.com/">Ionic Framework</a> to learn <a href="https://d3js.org/">D3.js</a> with Typescript.</p>

<p><a href="https://github.com/jasondavies/d3-cloud">github.com/jasondavies/d3-cloud</a>. This is a <a href="http://www.wordle.net/">Wordle</a>-inspired word cloud layout written in JavaScript. It uses HTML5 canvas and sprite masks to achieve near-interactive speeds.</p>
</blockquote>

<p>Once the basics were done I looked into what options I could give the user to take the application to the next level.</p>

<p>Adding the option of using different fonts was made possible via the fonts google have available at <a href="https://github.com/google/fonts">github.com/google/fonts</a>.</p>

<p>Displaying the word cloud inside a shape was a customisation I made to Jason Davies code. The code he wrote uses a mask to determine where words have already been placed. My change was to simply render a font awesome icon outline on the mask so that words could only be placed in the shape of the icon.</p>

<p>Finally various SVG filters and effects were made available. For examples see some of the effects on this page: <a href="https://www.smashingmagazine.com/2015/05/why-the-svg-filter-is-awesome/">www.smashingmagazine.com</a></p>

<p>Turning a web page into a list of words was made possible via unfluff &ldquo;An automatic web page content extractor for Node.js!&rdquo;  <a href="https://github.com/ageitgey/node-unfluff">github.com/ageitgey/node-unfluff</a></p>

<p></br></p>

<h3 id="the-architecture">The architecture</h3>

<p>I initially planned for the application to be downloadable from the Play and Apple stores as Ionic applications are cross platform. But the performance on devices was not acceptable so I have left it as a web only application.</p>

<p>The problem initially was that the calculation of the word cloud took too long on a device. To resolve this I made this part of the application server side. The final nail in the cross platform coffin was the rendering time on the device which wan&rsquo;t awful, just a bit too sluggish.</p>

<p>The application is made up of 3 parts:</p>

<ul>
<li>The files that make up the browser client (Ionic / Angular).</li>
<li>The CORS proxy - needed to avoid cross origin errors (NodeJS).</li>
<li>The server which turns a list of words into a word cloud (NodeJS).</li>
</ul>

<p><img src="/post/img/webwordcloud_architecture.jpg" alt="" /></p>

<h3 id="hosting-the-application">Hosting the application</h3>

<h4 id="client">Client</h4>

<p>The files that make up the browser client (Ionic / Angular) are hosted by Google in a static web site stored in a Google Cloud Storage bucket. The performance is great with no wake-up time even if the files have not been requested for a while.</p>

<p><a href="https://cloud.google.com/storage/docs/hosting-static-website">cloud.google.com/storage/docs/hosting-static-website</a></p>

<p><br/></p>

<h4 id="cors">CORS</h4>

<p>The CORS anywhere NodeJS server is hosted in Azure as an App service. The hosting plan is F1 (Free) which give 60 minutes a day of compute time, which should be more than enough.</p>

<p><a href="https://corsproxywebwordcloud.azurewebsites.net/">corsproxywebwordcloud.azurewebsites.net</a></p>

<p><br/></p>

<h4 id="layout-word-cloud">Layout Word Cloud</h4>

<p>The server to turn a list of words into a word cloud uses NodeJS which has some C++ dependencies so I put this in a docker container to simplify deployment. Initially this container was hosted on Google, but I ran out of my free credit so I moved it to Azure as an app service running a container.</p>

<p><a href="https://webwordcloudcontainer.azurewebsites.net/">webwordcloudcontainer.azurewebsites.net</a></p>

<p>The performance vs cost for light usage can be seen below. My monthly azure credits cover it running under B1.</p>

<table>
<thead>
<tr>
<th>Dev/Test Tier- A-series compute</th>
<th>Cost per month</th>
<th>Render Time (seconds)</th>
</tr>
</thead>

<tbody>
<tr>
<td>B1 - 100 total ACU - 1.75 GB memory</td>
<td>£29.09</td>
<td>2.1 to 2.5</td>
</tr>

<tr>
<td>B2 - 200 total ACU - 3.5 GB memory</td>
<td>£58.18</td>
<td>1.7 to 1.8</td>
</tr>

<tr>
<td>B3 - 400 total ACU - 7 GB memory</td>
<td>£116.44</td>
<td>1.5 to 1.6</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Production Tier - Dv2-series compute</th>
<th>Cost per month</th>
<th>Render Time (seconds)</th>
</tr>
</thead>

<tbody>
<tr>
<td>P1V2 - 210 total ACU - 3.5 GB memory</td>
<td>£96.27</td>
<td>0.6 to 0.7</td>
</tr>

<tr>
<td>P2V2 - 420 total ACU - 7 GB memory</td>
<td>£192.62</td>
<td>0.6 to 0.8</td>
</tr>

<tr>
<td>P2V3 - 840 total ACU - 14 GB memory</td>
<td>£385.32</td>
<td>0.6 to 0.7</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Production Tier - A-series compute</th>
<th>Cost per month</th>
<th>Render Time (seconds)</th>
</tr>
</thead>

<tbody>
<tr>
<td>S1 - 100 total ACU - 1.75 GB memory</td>
<td>£55.43</td>
<td>1.6 to 2.2</td>
</tr>

<tr>
<td>S2 - 200 total ACU - 3.5 GB memory</td>
<td>£110.86</td>
<td>1.6</td>
</tr>

<tr>
<td>S3 - 400 total ACU - 7 GB memory</td>
<td>£221.79</td>
<td>1.6</td>
</tr>
</tbody>
</table>

<p><br/></p>

<h3 id="conclusions">Conclusions</h3>

<p>There is a learning curve, but Ionic is good option for cross platform apps if you have Angular/JavaScript and Web skills. It is limited by the computing power of the phones and tablet it runs on, so graphically intense applications may not be a good fit.</p>

<p>Google storage buckets are a great place to host static web sites.</p>

<p><br/></p>

<h3 id="screenshots">Screenshots</h3>

<p><img src="/post/img/Screenshot0.jpg" alt="Screenshot0" /></p>

<p><br/></p>

<p><img src="/post/img/Screenshot.jpg" alt="" /></p>

<p><img src="/post/img/Screenshot1.jpg" alt="Screenshot1" /></p>

<p><br/></p>

<p><img src="/post/img/Screenshot2.jpg" alt="Screenshot2" /></p>

<p><br/></p>

<p><img src="/post/img/Screenshot3.jpg" alt="Screenshot3" /></p>

<p><br/></p>

<p><img src="/post/img/Screenshot4.jpg" alt="Screenshot4" /></p>

<p><br/></p>

<p><img src="/post/img/Screenshot5.jpg" alt="Screenshot5" /></p>

								</div>
								
									
							</div>
						</article>
						
						
						 <div class="row">
						<div class="col-xs-12 articleComments">
								<div id="disqus_thread"></div>
								<script type="text/javascript">
								    
									var disqus_shortname = 'codesindotnet';
									var disqus_identifier = 'Ionic';
									(function () {
										var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
										dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
										(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
									})();
								</script>
								<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
								<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
							</div>
						</div>

						

						
					</div>
				</div>
			</section>



		</div>
	    <!-- jQuery -->
<script src="http://www.codesin.net/js/jquery-1.11.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="http://www.codesin.net/js/bootstrap.js"></script>
<!-- Plugin JavaScript -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
<script src="http://www.codesin.net/js/classie.js"></script>
<script src="http://www.codesin.net/js/cbpAnimatedHeader.js"></script>
<!-- Contact Form JavaScript -->
<script src="http://www.codesin.net/js/jqBootstrapValidation.js"></script>
<script src="http://www.codesin.net/js/contact_me.js"></script>
<!-- Custom Theme JavaScript -->
<script src="http://www.codesin.net/js/freelancer.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>

<script>
    $(function() {
        $('.article').find('table').each(function(){ 
        $(this).addClass('table table-bordered table-striped' );
        });
    });
</script>

		<link rel="stylesheet" href="/css/options.css">

	   <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-59171735-1', 'auto');
          ga('send', 'pageview');
</script>
	   
	   <!-- About Section -->
<section class="success" id="about">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>About Me</h2>
                <hr class="star-light">
            </div>
        </div>
    <div class="row">
        <div class="col-lg-4 col-lg-offset-2">
            <p>My first computer was a Commodore VIC-20, I had great fun trying to code text adventures and side scrolling shoot &lsquo;em ups in BASIC. This helped me lead the way as the first in my school to pass a computer exam.</p>
        </div>
            <div class="col-lg-4">
                <p>Currently I work as a Senior Software Engineer in Bedford for a FTSE 100 Company. Coding daily in C#, JavaScript and SQL. Outside of work I work on whatever is interesting me at that time.</p>
            </div>
            
        </div>
    </div>
</section>

	   <!-- Footer -->
<footer class="text-center">
    <div class="footer-above">
        <div class="container">
            <div class="row">
                <div class="footer-col col-md-4">
                    <h3>Location</h3>

                    
                        <p>
                            
                                
                                Milton Keynes, United Kingdom
                            
                        </p>
                    
                </div>
                <div class="footer-col col-md-4">
                    <h3>Around the web</h3>
                    <ul class="list-inline">
                        
                            <li>
                                <a href="//github.com/julianperrott" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
                        
                            <li>
                                <a href="//uk.linkedin.com/in/julianperrott1" class="btn-social btn-outline"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
                        
                            <li>
                                <a href="//www.facebook.com/julianperrott" class="btn-social btn-outline"><i class="fa fa-fw fa-facebook"></i></a>
                            </li>
                        
                            <li>
                                <a href="mailto:julian_perrott@hotmail.com" class="btn-social btn-outline"><i class="fa fa-fw fa-envelope"></i></a>
                            </li>
                        
                    </ul>
                </div>
                <div class="footer-col col-md-4">
                    <h3>About Freelancer Theme</h3>
                    <p>Freelancer is a free to use, open source Bootstrap theme created by <a href="//startbootstrap.com">Start Bootstrap</a>.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-below">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    Published under the Apache License 2.0. Powered by <a href="//gohugo.io">Hugo</a>.
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-top page-scroll visible-xs visible-sm">
    <a class="btn btn-primary" href="#page-top">
        <i class="fa fa-chevron-up"></i>
    </a>
</div>

		
		<script type="text/javascript">
		  
		  
		 (function () {
		 var s = document.createElement('script'); s.async = true;
		 s.type = 'text/javascript';
		 s.src = '//' + disqus_shortname + '.disqus.com/count.js';
		 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
		 }());
	 </script> 
		
	</body>
</html>